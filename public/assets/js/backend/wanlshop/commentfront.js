"use strict";define(["jquery","bootstrap","backend","table","form"],function(e,t,i,a,n){return{detail:function(){e(document).on("click",".detail[data-id]",function(){parent.window.Fast.api.open("wanlshop/order/detail/id/"+e(this).data("id"),__("查看详情"),{area:["1200px","780px"]})})},select:function(){a.api.init({extend:{index_url:"wanlshop/comment/select"}});var t=[],n=e("#table");n.on("check.bs.table uncheck.bs.table check-all.bs.table uncheck-all.bs.table",function(i,a){"check"==i.type||"uncheck"==i.type?a=[a]:t=[],e.each(a,function(e,a){if(i.type.indexOf("uncheck")>-1){var n=t.indexOf(a.id);n>-1&&t.splice(n,1)}else-1==t.indexOf(a.id)&&t.push(a.id)})}),n.bootstrapTable({url:e.fn.bootstrapTable.defaults.extend.index_url,sortName:"id",showToggle:!1,showExport:!1,columns:[[{checkbox:!0},{field:"id",title:__("Id")},{field:"user.nickname",title:__("User.nickname"),formatter:a.api.formatter.search},{field:"content",title:__("Content")},{field:"images",title:__("Images"),events:a.api.events.image,formatter:a.api.formatter.images},{field:"state",title:__("States"),searchList:{0:__("States 0"),1:__("States 1"),2:__("States 2")},formatter:a.api.formatter.normal},{field:"score",title:__("Score"),operate:"BETWEEN"},{field:"operate",title:__("Operate"),events:{"click .btn-chooseone":function(e,t,a,n){var o=i.api.query("multiple");o="true"==o,Fast.api.close({url:a.id,data:{id:a.id,goods_id:a.goods_id,images:a.images,user:a.user.nickname,content:a.content},multiple:o})}},formatter:function(){return'<a href="javascript:;" class="btn btn-danger btn-chooseone btn-xs"><i class="fa fa-check"></i> '+__("Choose")+"</a>"}}]]}),e(document).on("click",".btn-choose-multi",function(){var e=i.api.query("multiple");e="true"==e,Fast.api.close({url:t.join(","),multiple:e})}),a.api.bindevent(n)},api:{bindevent:function(){n.api.bindevent(e("form[role=form]"))}}}});