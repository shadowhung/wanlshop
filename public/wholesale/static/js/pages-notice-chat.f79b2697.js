(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-notice-chat"],{"07d7":function(n,t,i){"use strict";var e=i("e772"),r=i.n(e);r.a},"697c":function(n,t,i){"use strict";i.r(t);var e=i("d791"),r=i.n(e);for(var s in e)"default"!==s&&function(n){i.d(t,n,(function(){return e[n]}))}(s);t["default"]=r.a},"6ce5":function(n,t,i){var e=i("24fb");t=e(!1),t.push([n.i,'\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/* 1.0.2升级 */.cu-btn.sm[data-v-06670116]{font-size:%?26?%}.cu-modal[data-v-06670116]{z-index:2001}.chatTips[data-v-06670116]{display:-webkit-inline-box;display:-webkit-inline-flex;display:inline-flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;position:absolute;z-index:101;right:0;left:0;bottom:%?120?%;bottom:calc(%?120?% + env(safe-area-inset-bottom))}.chatTips uni-image[data-v-06670116]{width:%?100?%;height:%?100?%;margin-right:%?20?%;-webkit-flex-shrink:0;flex-shrink:0}.chatTips .details[data-v-06670116]{width:calc(100% - %?100?% - %?20?%)}.chatTips .details .title[data-v-06670116]{width:90%}.cu-chat .cu-item > .main.goods .content[data-v-06670116], .cu-chat .cu-item > .main.order .content[data-v-06670116]{display:block}.cu-chat .cu-item > .main.order[data-v-06670116]{max-width:calc(100% - %?200?%)}.cu-chat .cu-item > .main.order .product[data-v-06670116]{background-color:#f9f9f9}.cu-chat .cu-item > .main.order .product .item[data-v-06670116]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;margin-bottom:%?25?%}.cu-chat .cu-item > .main.order .product .item[data-v-06670116]:last-of-type{margin-bottom:0}.cu-chat .cu-item > .main.order .product .item .image[data-v-06670116], .product .item .image uni-image[data-v-06670116]{width:%?100?%;height:%?100?%;-webkit-border-radius:%?10?%;border-radius:%?10?%}.cu-chat .cu-item > .main.order .product .item .details[data-v-06670116]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-flex-wrap:wrap;flex-wrap:wrap;width:calc(100% - %?120?%);-webkit-align-content:space-between;align-content:space-between}\r\n/* 1.0.2升级 模态框 */.wanl-modal .goods[data-v-06670116]{display:-webkit-box;display:-webkit-flex;display:flex;padding:%?20?% 0}.wanl-modal .goods[data-v-06670116]:last-of-type{padding-bottom:0}.wanl-modal .goods uni-image[data-v-06670116]{width:%?180?%;height:%?180?%;margin-right:%?20?%;-webkit-flex-shrink:0;flex-shrink:0}.wanl-modal .goods .details[data-v-06670116]{-webkit-flex-wrap:wrap;flex-wrap:wrap;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-flex:1;-webkit-flex:1;flex:1;-webkit-align-content:space-between;align-content:space-between}.wanl-modal .goods .details .info[data-v-06670116]{width:100%}.opmenu[data-v-06670116]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-flex-wrap:wrap;flex-wrap:wrap;margin-top:%?2?%;color:#4c4c4c}.opmenu .box[data-v-06670116]{padding-top:%?35?%;padding-left:%?50?%;text-align:center}.opmenu .box .icon[data-v-06670116]{height:%?120?%;width:%?120?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;justify-items:center;background-color:#fff;-webkit-border-radius:%?20?%;border-radius:%?20?%;font-size:%?68?%;margin-bottom:%?10?%}.emptybottom[data-v-06670116]{padding-bottom:0!important}.hidden[data-v-06670116]{display:none!important}.cu-chat .cu-item > .main .content[data-v-06670116]{font-size:%?30?%;-webkit-border-radius:%?17?%;border-radius:%?17?%}.cu-chat .cu-item [class*="wlIcon-"][data-v-06670116]{font-size:%?34?%}.popup-layer[data-v-06670116]{-webkit-transition:all .15s linear;transition:all .15s linear;width:100%;height:%?480?%;background-color:#f5f5f5;position:fixed;z-index:2000;top:100%}.popup-layer.showLayer[data-v-06670116]{-webkit-transform:translate3d(0,%?-480?%,0);transform:translate3d(0,%?-480?%,0)}.popup-layer .emoji .emojinav[data-v-06670116]{background-color:#f8f8f8}.popup-layer .emoji .emojinav .item[data-v-06670116]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;height:%?100?%;padding-left:%?10?%}.popup-layer .emoji .emojinav .item .emojibg[data-v-06670116]{background-color:#dedede}.popup-layer .emoji .emojinav .item > uni-view[data-v-06670116]{margin:0 %?25?%;width:%?60?%;height:%?60?%;-webkit-border-radius:%?18?%;border-radius:%?18?%;background-repeat:no-repeat;background-size:80%;background-position:50%}.popup-layer .emoji .subject[data-v-06670116]{height:%?380?%;background-color:#f1f1f1}.popup-layer .emoji .subject .item[data-v-06670116]{padding:%?25?%}.popup-layer .emoji .subject .item > uni-view[data-v-06670116]{background-repeat:no-repeat;background-size:56%;background-position:50%;width:12.5%;height:%?100?%}.input-box[data-v-06670116]{width:100%;min-height:%?100?%;padding-bottom:env(safe-area-inset-bottom);background-color:#f2f2f2;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:end;-webkit-align-items:flex-end;align-items:flex-end;position:fixed;z-index:2000;bottom:%?-2?%;-webkit-transition:all .15s linear;transition:all .15s linear}.input-box [class*="wlIcon-"][data-v-06670116]{font-size:%?50?%;color:#323232}.input-box .wlIcon-zhifeiji[data-v-06670116]{color:#fe6600}.input-box.showLayer[data-v-06670116]{-webkit-transform:translate3d(0,%?-480?%,0);transform:translate3d(0,%?-480?%,0)}.input-box .voice[data-v-06670116],\r\n.input-box .more[data-v-06670116]{-webkit-flex-shrink:0;flex-shrink:0;width:%?90?%;height:%?100?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.input-box .send[data-v-06670116]{-webkit-flex-shrink:0;flex-shrink:0;width:%?90?%;height:%?100?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.input-box .send .btn[data-v-06670116]{width:%?110?%;height:%?70?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-border-radius:%?16?%;border-radius:%?16?%;font-size:%?32?%}.input-box .textbox[data-v-06670116]{width:100%}.input-box .textbox .voice-mode[data-v-06670116]{width:calc(100% - %?2?%);height:%?80?%;margin:%?10?% 0;-webkit-border-radius:%?16?%;border-radius:%?16?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;font-size:%?28?%;background-color:#fff;color:#555}.input-box .textbox .voice-mode.recording[data-v-06670116]{background-color:#e5e5e5}.input-box .textbox .text-mode[data-v-06670116]{width:100%;min-height:%?80?%;margin:%?10?% 0;display:-webkit-box;display:-webkit-flex;display:flex;background-color:#fff;-webkit-border-radius:%?16?%;border-radius:%?16?%}.input-box .textbox .text-mode .box[data-v-06670116]{width:100%;padding-left:%?30?%;min-height:%?80?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.input-box .textbox .text-mode .box uni-textarea[data-v-06670116]{width:100%}.input-box .textbox .text-mode .em[data-v-06670116]{-webkit-flex-shrink:0;flex-shrink:0;width:%?80?%;padding-left:%?10?%;height:%?80?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.record[data-v-06670116]{width:39vw;height:39vw;position:fixed;top:35%;left:30%;background-color:rgba(0,0,0,.8);-webkit-border-radius:%?40?%;border-radius:%?40?%}.record .ing[data-v-06670116]{width:100%;height:30vw;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center}@-webkit-keyframes volatility-data-v-06670116{0%{background-position:0 130%}20%{background-position:0 150%}30%{background-position:0 155%}40%{background-position:0 160%}50%{background-position:0 145%}70%{background-position:0 150%}80%{background-position:0 170%}90%{background-position:0 160%}100%{background-position:0 135%}}@keyframes volatility-data-v-06670116{0%{background-position:0 130%}20%{background-position:0 150%}30%{background-position:0 155%}40%{background-position:0 160%}50%{background-position:0 145%}70%{background-position:0 150%}80%{background-position:0 170%}90%{background-position:0 160%}100%{background-position:0 135%}}.record .ing [class*="wlIcon"][data-v-06670116]{background-image:-webkit-gradient(linear,left top,left bottom,from(#fff),color-stop(50%,#565656));background-image:-webkit-linear-gradient(top,#fff,#565656 50%);background-image:linear-gradient(180deg,#fff,#565656 50%);background-size:100% 200%;-webkit-animation:volatility-data-v-06670116 1.5s ease-in-out -1.5s infinite alternate;animation:volatility-data-v-06670116 1.5s ease-in-out -1.5s infinite alternate;-webkit-background-clip:text;-webkit-text-fill-color:transparent;font-size:%?140?%;padding-top:%?40?%;color:#f09b37}.record .cancel[data-v-06670116]{width:100%;height:30vw;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.record .cancel [class*="wlIcon"][data-v-06670116]{color:#fff;font-size:%?150?%}.record .tis[data-v-06670116]{width:100%;height:10vw;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;font-size:%?24?%;color:#fff}.record .tis.change[data-v-06670116]{color:#f09b37}.content[data-v-06670116]{width:100%}uni-page-body[data-v-06670116]{background-color:#ececec}.content .msg-list[data-v-06670116],\r\n.cu-chat[data-v-06670116]{position:absolute;top:0;bottom:%?100?%;bottom:calc(env(safe-area-inset-bottom) + %?100?%);background-color:#ececec}.loading[data-v-06670116]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}@-webkit-keyframes stretchdelay-data-v-06670116{0%,\r\n\t40%,\r\n\t100%{-webkit-transform:scaleY(.6);transform:scaleY(.6)}20%{-webkit-transform:scaleY(1);transform:scaleY(1)}}@keyframes stretchdelay-data-v-06670116{0%,\r\n\t40%,\r\n\t100%{-webkit-transform:scaleY(.6);transform:scaleY(.6)}20%{-webkit-transform:scaleY(1);transform:scaleY(1)}}.loading .spinner[data-v-06670116]{margin:%?20?% 0;width:%?60?%;height:%?100?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.loading .spinner uni-view[data-v-06670116]{background-color:#dadada;height:%?50?%;width:%?6?%;-webkit-border-radius:%?6?%;border-radius:%?6?%;-webkit-animation:stretchdelay-data-v-06670116 1.2s infinite ease-in-out;animation:stretchdelay-data-v-06670116 1.2s infinite ease-in-out}.loading .spinner .rect2[data-v-06670116]{-webkit-animation-delay:-1.1s;animation-delay:-1.1s}.loading .spinner .rect3[data-v-06670116]{-webkit-animation-delay:-1s;animation-delay:-1s}.loading .spinner .rect4[data-v-06670116]{-webkit-animation-delay:-.9s;animation-delay:-.9s}.loading .spinner .rect5[data-v-06670116]{-webkit-animation-delay:-.8s;animation-delay:-.8s}body.?%PAGE?%[data-v-06670116]{background-color:#ececec}',""]),n.exports=t},"82ca":function(n,t,i){"use strict";i.r(t);var e=i("bd96"),r=i("697c");for(var s in r)"default"!==s&&function(n){i.d(t,n,(function(){return r[n]}))}(s);i("07d7");var a,o=i("f0c5"),c=Object(o["a"])(r["default"],e["b"],e["c"],!1,null,"06670116",null,!1,e["a"],a);t["default"]=c.exports},bd96:function(n,t,i){"use strict";var e;i.d(t,"b",(function(){return r})),i.d(t,"c",(function(){return s})),i.d(t,"a",(function(){return e}));var r=function(){var n=this,t=n.$createElement,i=n._self._c||t;return i("v-uni-view",{staticClass:"wanl-chat"},[i("v-uni-view",{staticClass:"edgeInsetTop"}),i("v-uni-view",{on:{touchstart:function(t){arguments[0]=t=n.$handleEvent(t),n.hideDrawer.apply(void 0,arguments)}}},[i("v-uni-scroll-view",{staticClass:"cu-chat",attrs:{"scroll-y":"true","scroll-with-animation":n.scrollAnimation,"scroll-top":n.scrollTop,"scroll-into-view":n.scrollToView,"upper-threshold":"50"},on:{scrolltoupper:function(t){arguments[0]=t=n.$handleEvent(t),n.loadHistory.apply(void 0,arguments)}}},[i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:n.isHistoryLoading,expression:"isHistoryLoading"}],staticClass:"loading"},[i("v-uni-view",{staticClass:"spinner"},[i("v-uni-view",{staticClass:"rect1"}),i("v-uni-view",{staticClass:"rect2"}),i("v-uni-view",{staticClass:"rect3"}),i("v-uni-view",{staticClass:"rect4"}),i("v-uni-view",{staticClass:"rect5"})],1)],1),n._l(n.msgList,(function(t,e){return i("v-uni-view",{key:e,attrs:{id:"msg"+t.id}},["chat"==t.type?i("v-uni-view",[t.to_id==n.to_id?i("v-uni-view",{staticClass:"cu-item self"},["text"==t.message.type?i("v-uni-view",{staticClass:"main"},[i("v-uni-view",{staticClass:"content bg-green"},[i("v-uni-rich-text",{attrs:{nodes:t.message.content.text}})],1)],1):n._e(),"img"==t.message.type?i("v-uni-view",{staticClass:"main"},[i("v-uni-image",{style:{width:t.message.content.w+"px",height:t.message.content.h+"px"},attrs:{src:t.message.content.url},on:{click:function(i){arguments[0]=i=n.$handleEvent(i),n.showPic(t.message)}}})],1):n._e(),"voice"==t.message.type?i("v-uni-view",{staticClass:"main",class:n.playMsgid==t.message.id?"play":"",on:{click:function(i){arguments[0]=i=n.$handleEvent(i),n.playVoice(t.message)}}},[i("v-uni-view",{staticClass:"action text-bold text-grey",staticStyle:{"padding-right":"2rpx"}},[n._v(n._s(t.message.content.length)),i("v-uni-text",{staticClass:"wlIcon-miao"})],1),i("v-uni-view",{staticClass:"content bg-green"},[i("v-uni-text",{style:{width:6*t.message.content.length+"rpx"}}),i("v-uni-text",{staticClass:"wlIcon-yuyinyou text-xxl padding-left-xl"})],1)],1):n._e(),"goods"==t.message.type?i("v-uni-view",{staticClass:"main goods"},[i("v-uni-view",{staticClass:"content",on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.onGoods(n.goods.id)}}},[i("v-uni-image",{attrs:{src:n.$wanlshop.oss(t.message.content.image,100,0),mode:"widthFix"}}),i("v-uni-view",{staticClass:"text-price text-orange text-lg margin-tb-xs"},[n._v(n._s(t.message.content.price))]),i("v-uni-view",[n._v(n._s(t.message.content.title))])],1)],1):n._e(),"order"==t.message.type?i("v-uni-view",{staticClass:"main order"},[i("v-uni-view",{staticClass:"content",on:{click:function(i){arguments[0]=i=n.$handleEvent(i),n.orderDetails(t.message.content.id)}}},[i("v-uni-view",{},[i("v-uni-text",[n._v("訂單詳情：")])],1),i("v-uni-view",{staticClass:"margin-tb-bj radius product padding-sm"},n._l(t.message.content.goods,(function(t,e){return i("v-uni-view",{key:e,staticClass:"item"},[i("v-uni-view",{staticClass:"image"},[i("v-uni-image",{attrs:{src:n.$wanlshop.oss(t.image,50,50),mode:"aspectFill"}})],1),i("v-uni-view",{staticClass:"details text-sm"},[i("v-uni-view",{staticClass:"text-cut wanl-gray-dark"},[i("v-uni-text",[n._v(n._s(t.title))])],1),i("v-uni-view",{staticClass:"wanl-gray-light flex justify-between",staticStyle:{width:"100%"}},[i("v-uni-view",{staticClass:"text-price text-orange"},[n._v(n._s(t.price*t.number))]),i("v-uni-view",[i("v-uni-text",[n._v(n._s(t.difference)+" x "+n._s(t.number))]),0!=t.refund_status?i("v-uni-text",[n._v("("+n._s(n.refundStatusText[t.refund_status])+")")]):n._e()],1)],1)],1)],1)})),1),i("v-uni-view",{staticClass:"text-sm flex justify-between "},[i("v-uni-view",[i("v-uni-text",{},[n._v(n._s(n.stateText[t.message.content.state-1]))])],1),i("v-uni-view",[i("v-uni-text",[n._v("ID：")]),i("v-uni-text",[n._v(n._s(t.message.content.order_no))])],1)],1)],1)],1):n._e(),i("v-uni-view",{staticClass:"cu-avatar radius",style:{backgroundImage:"url("+n.$wanlshop.oss(t.form.avatar,100,100)+")"}}),i("v-uni-view",{staticClass:"date"},[n._v(n._s(n.$wanlshop.timeToChat(t.createtime)))])],1):i("v-uni-view",{staticClass:"cu-item"},[i("v-uni-view",{staticClass:"cu-avatar radius",style:{backgroundImage:"url("+n.$wanlshop.oss(t.form.avatar,100,100)+")"}}),"text"==t.message.type?i("v-uni-view",{staticClass:"main"},[i("v-uni-view",{staticClass:"content"},[i("v-uni-rich-text",{attrs:{nodes:t.message.content.text}})],1)],1):n._e(),"img"==t.message.type?i("v-uni-view",{staticClass:"main"},[i("v-uni-image",{style:{width:t.message.content.w+"px",height:t.message.content.h+"px"},attrs:{src:t.message.content.url},on:{click:function(i){arguments[0]=i=n.$handleEvent(i),n.showPic(t.message)}}})],1):n._e(),"voice"==t.message.type?i("v-uni-view",{staticClass:"main",class:n.playMsgid==t.message.id?"play":"",on:{click:function(i){arguments[0]=i=n.$handleEvent(i),n.playVoice(t.message)}}},[i("v-uni-view",{staticClass:"content"},[i("v-uni-text",{staticClass:"wlIcon-yuyinzuo text-xxl padding-right-xl"}),i("v-uni-text",{style:{width:6*t.message.content.length+"rpx"}})],1),i("v-uni-view",{staticClass:"action text-bold text-grey"},[n._v(n._s(t.message.content.length)),i("v-uni-text",{staticClass:"wlIcon-miao"})],1)],1):n._e(),i("v-uni-view",{staticClass:"date "},[n._v(n._s(n.$wanlshop.timeToChat(t.createtime)))])],1)],1):n._e(),"sys"==t.type?i("v-uni-view",[i("v-uni-view",{staticClass:"cu-info round"},[n._v("對方撤回一條消息!")])],1):n._e()],1)}))],2)],1),i("v-uni-view",{staticClass:"popup-layer",class:{showLayer:n.popupLayerClass},on:{touchmove:function(t){t.stopPropagation(),t.preventDefault(),arguments[0]=t=n.$handleEvent(t),n.discard.apply(void 0,arguments)}}},[i("v-uni-view",{class:{hidden:n.hideEmoji}},[i("v-uni-view",{staticClass:"emoji"},[i("v-uni-scroll-view",{staticClass:"emojinav",attrs:{"scroll-x":!0,"scroll-with-animation":!0}},[i("v-uni-view",{staticClass:"item"},n._l(n.emojiList.categories,(function(t,e){return i("v-uni-view",{key:e,class:t==n.TabCur?"emojibg":"",style:{backgroundImage:"url("+n.emojiList.groups[t][0].url+")"},attrs:{"data-id":t},on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.tabSelect.apply(void 0,arguments)}}})})),1)],1),n._l(n.emojiList.groups,(function(t,e){return n.TabCur==e?i("v-uni-scroll-view",{key:e,staticClass:"subject",attrs:{"scroll-y":!0,"scroll-with-animation":!0}},[i("v-uni-view",{staticClass:"item grid margin-bottom text-center col-5"},n._l(t,(function(t,e){return i("v-uni-view",{key:e,style:{backgroundImage:"url("+t.url+")"},on:{click:function(i){arguments[0]=i=n.$handleEvent(i),n.addEmoji(t.value)}}})})),1)],1):n._e()}))],2)],1),i("v-uni-view",{staticClass:"solid-top",class:{hidden:n.hideMore}},[i("v-uni-view",{staticClass:"opmenu solid-top"},[i("v-uni-view",{staticClass:"box",on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.browsing.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"icon wanl-gray"},[i("v-uni-text",{staticClass:"wlIcon-shangpin-"})],1),i("v-uni-text",{staticClass:"text-sm"},[n._v("商品")])],1),i("v-uni-view",{staticClass:"box",on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.order.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"icon wanl-gray"},[i("v-uni-text",{staticClass:"wlIcon-dingdan1"})],1),i("v-uni-text",{staticClass:"text-sm"},[n._v("訂單")])],1),i("v-uni-view",{staticClass:"box",on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.chooseImage.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"icon wanl-gray"},[i("v-uni-text",{staticClass:"wlIcon-tupian1"})],1),i("v-uni-text",{staticClass:"text-sm"},[n._v("照片")])],1),i("v-uni-view",{staticClass:"box",on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.complaint.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"icon wanl-gray"},[i("v-uni-text",{staticClass:"wlIcon-zhuyidapx"})],1),i("v-uni-text",{staticClass:"text-sm"},[n._v("投诉")])],1)],1)],1)],1),i("v-uni-view",{staticClass:"input-box",class:{emptybottom:n.emptybottom,showLayer:n.popupLayerClass},on:{touchmove:function(t){t.stopPropagation(),t.preventDefault(),arguments[0]=t=n.$handleEvent(t),n.discard.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"more",on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.showMore.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"wlIcon-yuanquanjiahao"})],1),i("v-uni-view",{staticClass:"textbox"},[i("v-uni-view",{staticClass:"voice-mode",class:[n.isVoice?"":"hidden",n.recording?"recording":""],on:{touchstart:function(t){arguments[0]=t=n.$handleEvent(t),n.voiceBegin.apply(void 0,arguments)},touchmove:function(t){t.stopPropagation(),t.preventDefault(),arguments[0]=t=n.$handleEvent(t),n.voiceIng.apply(void 0,arguments)},touchend:function(t){arguments[0]=t=n.$handleEvent(t),n.voiceEnd.apply(void 0,arguments)},touchcancel:function(t){arguments[0]=t=n.$handleEvent(t),n.voiceCancel.apply(void 0,arguments)}}},[n._v(n._s(n.voiceTis))]),i("v-uni-view",{staticClass:"text-mode",class:n.isVoice?"hidden":""},[i("v-uni-view",{staticClass:"box"},[i("v-uni-textarea",{attrs:{"auto-height":"true",maxlength:"300","show-confirm-bar":!1,"cursor-spacing":"90"},on:{focus:function(t){arguments[0]=t=n.$handleEvent(t),n.textareaFocus.apply(void 0,arguments)},blur:function(t){arguments[0]=t=n.$handleEvent(t),n.textareaBlur.apply(void 0,arguments)},confirm:function(t){arguments[0]=t=n.$handleEvent(t),n.sendText.apply(void 0,arguments)}},model:{value:n.textMsg,callback:function(t){n.textMsg=t},expression:"textMsg"}})],1),i("v-uni-view",{staticClass:"em",on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.chooseEmoji.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"wlIcon-biaoqing2"})],1)],1)],1),i("v-uni-view",{staticClass:"send",class:n.isVoice?"hidden":"",on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.sendText.apply(void 0,arguments)}}},[n.textMsg?i("v-uni-text",{staticClass:"wlIcon-zhifeiji"}):i("v-uni-text",{staticClass:"wlIcon-fasong"})],1)],1),n.goods&&n.isGoods?i("v-uni-view",{staticClass:"chatTips bg-white radius-bock margin-lr-bj padding-sm"},[i("v-uni-image",{staticClass:"radius",attrs:{src:n.$wanlshop.oss(n.goods.image,100,100),mode:"aspectFill"}}),i("v-uni-view",{staticClass:"details"},[i("v-uni-view",{staticClass:"flex justify-between margin-bottom-sm"},[i("v-uni-view",{staticClass:"text-cut title"},[i("v-uni-text",[n._v(n._s(n.goods.title))])],1),i("v-uni-view",{on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.closeTips()}}},[i("v-uni-text",{staticClass:"wlIcon-31guanbi"})],1)],1),i("v-uni-view",{staticClass:"flex justify-between"},[i("v-uni-view",{staticClass:"text-lg text-orange"},[i("v-uni-text",{staticClass:"text-price"},[n._v(n._s(n.goods.price))])],1),i("v-uni-view",[i("v-uni-button",{staticClass:"cu-btn round bg-orange sm",on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.sendGoods(n.goods)}}},[n._v("發送商家")])],1)],1)],1)],1):n._e(),i("v-uni-view",{staticClass:"record",class:n.recording?"":"hidden"},[i("v-uni-view",{staticClass:"ing",class:n.willStop?"hidden":""},[i("v-uni-view",{staticClass:"wlIcon-huatong01"})],1),i("v-uni-view",{staticClass:"cancel",class:n.willStop?"":"hidden"},[i("v-uni-view",{staticClass:"wlIcon-shanchu2"})],1),i("v-uni-view",{staticClass:"tis",class:n.willStop?"change":""},[n._v(n._s(n.recordTis))])],1),i("v-uni-view",{staticClass:"WANL-MODAL"},[i("v-uni-view",{staticClass:"cu-modal bottom-modal",class:"goods"==n.modalName?"show":"",on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.hideModal.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"cu-dialog bg-white",on:{click:function(t){t.stopPropagation(),arguments[0]=t=n.$handleEvent(t)}}},[i("v-uni-view",{staticClass:"wanl-modal"},[i("v-uni-view",{staticClass:"head padding-bj"},[i("v-uni-view",{staticClass:"content"},[i("v-uni-view",{staticClass:"text-lg"},[n._v("瀏覽过的商品")])],1),i("v-uni-view",{staticClass:"close wlIcon-31guanbi",on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.hideModal.apply(void 0,arguments)}}})],1),i("v-uni-scroll-view",{staticClass:"scroll-y",attrs:{"scroll-y":"true"}},n._l(n.goodsData,(function(t,e){return i("v-uni-view",{key:e,staticClass:"item goods"},[i("v-uni-image",{staticClass:"radius",attrs:{src:n.$wanlshop.oss(t.goods.image,100,100),mode:"aspectFill"}}),i("v-uni-view",{staticClass:"details"},[i("v-uni-view",{staticClass:"text-cut-2 title"},[i("v-uni-text",[n._v(n._s(t.goods.title))])],1),i("v-uni-view",{staticClass:"flex justify-between info"},[i("v-uni-view",{staticClass:"text-lg text-orange"},[i("v-uni-text",{staticClass:"text-price"},[n._v(n._s(t.goods.price))])],1),i("v-uni-button",{staticClass:"cu-btn round line-orange sm",on:{click:function(i){arguments[0]=i=n.$handleEvent(i),n.sendGoods(t.goods)}}},[n._v("發送商品")])],1)],1)],1)})),1),i("v-uni-view",{staticClass:"foot padding-lr-bj"},[i("v-uni-button",{staticClass:"cu-btn bg-gradual-orange round text-bold complete",on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.hideModal.apply(void 0,arguments)}}},[n._v("完成")])],1)],1)],1)],1),i("v-uni-view",{staticClass:"cu-modal bottom-modal",class:"order"==n.modalName?"show":"",on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.hideModal.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"cu-dialog bg-bgcolor",on:{click:function(t){t.stopPropagation(),arguments[0]=t=n.$handleEvent(t)}}},[i("v-uni-view",{staticClass:"wanl-modal"},[i("v-uni-view",{staticClass:"head padding-bj"},[i("v-uni-view",{staticClass:"content"},[i("v-uni-view",{staticClass:"text-lg"},[n._v("購买过的訂單")])],1),i("v-uni-view",{staticClass:"close wlIcon-31guanbi",on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.hideModal.apply(void 0,arguments)}}})],1),i("v-uni-scroll-view",{staticClass:"scroll-y",attrs:{"scroll-y":"true"}},n._l(n.orderData,(function(t,e){return i("v-uni-view",{key:t.id,staticClass:"item bg-white radius-bock margin-tb-sm padding-bj",on:{click:function(i){arguments[0]=i=n.$handleEvent(i),n.sendOrder(t)}}},[i("v-uni-view",{staticClass:"flex justify-between"},[i("v-uni-text",[n._v("訂單号："+n._s(t.order_no))]),i("v-uni-text",{staticClass:"wanl-gray-dark text-sm"},[n._v(n._s(n.stateText[t.state-1]))])],1),n._l(t.goods,(function(t,e){return i("v-uni-view",{key:e,staticClass:"goods"},[i("v-uni-image",{staticClass:"radius",attrs:{src:n.$wanlshop.oss(t.image,100,100),mode:"aspectFill"}}),i("v-uni-view",{staticClass:"details"},[i("v-uni-view",{staticClass:"text-cut-2 title wanl-gray-dark"},[i("v-uni-text",[n._v(n._s(t.title))])],1),i("v-uni-view",{staticClass:"flex justify-between info"},[i("v-uni-view",{staticClass:"text-lg text-orange"},[i("v-uni-text",{staticClass:"text-price"},[n._v(n._s(t.price))])],1)],1)],1)],1)})),i("v-uni-view",{staticClass:"flex justify-end"},[i("v-uni-button",{staticClass:"cu-btn round sm line-orange"},[n._v("發送訂單")])],1)],2)})),1),i("v-uni-view",{staticClass:"foot padding-lr-bj"},[i("v-uni-button",{staticClass:"cu-btn bg-gradual-orange round text-bold complete",on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.hideModal.apply(void 0,arguments)}}},[n._v("完成")])],1)],1)],1)],1)],1)],1)},s=[]},d791:function(n,t,i){"use strict";(function(n){i("99af"),i("4160"),i("d81d"),i("4e82"),i("e25e"),i("ac1f"),i("5319"),i("159b"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;i("2f62");var e=i("5827"),r={data:function(){return{user_id:this.$store.state.user.id,avatar:this.$store.state.user.avatar,username:this.$store.state.user.username,nickname:this.$store.state.user.nickname,to_id:0,shop_id:0,shop_name:null,shop_avatar:null,textMsg:"",isHistoryLoading:!1,reload:!1,current_page:1,scrollAnimation:!1,scrollTop:0,scrollToView:"",msgList:[],msgImgList:[],goods:null,isGoods:!0,goodsData:[],orderData:[],emptybottom:!1,isVoice:!1,voiceTis:"按住 说话",recordTis:"手指上滑 取消發送",recording:!1,willStop:!1,initPoint:{identifier:0,Y:0},recordTimer:null,recordLength:0,AUDIO:uni.createInnerAudioContext(),playMsgid:null,VoiceTimer:null,popupLayerClass:!1,hideMore:!0,modalName:null,stateText:["等待您付款","付款成功","待收貨","待評論","退款訂單","訂單已完成","交易關闭"],refundStatusText:["未退款","退款中","待退貨","退款完成","退款關闭","退款被拒"],refundStatusBg:["","bg-orange","bg-red","bg-green","bg-grey","bg-red"],TabCur:"默认",hideEmoji:!0,emojiList:this.emojiData(),QnUrl:"",Sysmodel:this.$wanlshop.wanlsys().model}},onLoad:function(n){var t=this;n.hasOwnProperty("goods")&&(this.goods=JSON.parse(n.goods),setTimeout((function(){t.isGoods=!1}),5e3)),this.$store.commit("chat/setIschat",{notice:!1}),this.$api.post({url:"/wanlshop/shop/shop",data:{id:n.shop_id,type:"chat"},success:function(n){t.to_id=n.user_id,t.shop_id=n.id,t.shop_name=n.shopname,t.shop_avatar=n.avatar,t.$wanlshop.title(n.shopname+(1==n.isOnline?"-在线":"-离线")),t.getMsgList(n.user_id)}}),this.AUDIO.onEnded((function(n){t.playMsgid=null})),uni.$on("onChat",this.onSend)},onNavigationBarButtonTap:function(){this.onShop(this.shop_id)},onUnload:function(){this.$store.dispatch("chat/update",{type:"del",id:this.to_id}),this.$store.commit("chat/setIschat",{notice:!0,number:0})},onShow:function(){this.scrollTop=9999999},methods:{getMsgList:function(n){var t=this;uni.getStorage({key:"wanlchat:message_"+n,success:function(n){for(var i=n.data,e=0;e<i.length;e++)"chat"==i[e].type&&"img"==i[e].message.type&&(i[e].message.content=t.setPicSize(i[e].message.content),t.msgImgList.push(i[e].message.content.url)),"chat"==i[e].type&&"text"==i[e].message.type&&(i[e].message.content.text=t.replaceEmoji(i[e].message.content.text));t.msgList=i,t.$nextTick((function(){t.scrollTop=9999,t.$nextTick((function(){t.scrollAnimation=!0}))}))}})},onChat:function(n){var t=this;"system"==n.type?"text"==n.msg.type&&this.addSystemTextMsg(n):"chat"==n.type&&("text"==n.message.type&&this.addTextMsg(n),"voice"==n.message.type&&this.addVoiceMsg(n),"img"==n.message.type&&this.addImgMsg(n),"goods"==n.message.type&&this.addGoodsMsg(n),"order"==n.message.type&&this.addOrderMsg(n)),this.$nextTick((function(){t.scrollToView="msg"+n.id}))},onSend:function(n){var t=this;n.form.id==this.to_id&&("system"==n.type?"text"==n.msg.type&&this.addSystemTextMsg(n):"chat"==n.type&&("text"==n.message.type&&this.addTextMsg(n),"voice"==n.message.type&&this.addVoiceMsg(n),"img"==n.message.type&&this.addImgMsg(n),"goods"==n.message.type&&this.addGoodsMsg(n),"order"==n.message.type&&this.addOrderMsg(n)),this.$nextTick((function(){t.scrollToView="msg"+n.id})))},sendMsg:function(n,t){var i=1;this.msgList.length&&(i=this.msgList[this.msgList.length-1].id,i++);var e={id:i,type:"chat",to_id:this.to_id,form:{id:this.user_id,avatar:this.avatar,name:this.nickname},message:{type:t,content:n},createtime:parseInt((new Date).getTime()/1e3)};this.onChat(JSON.parse(JSON.stringify(e))),this.$store.dispatch("chat/update",{type:"send",data:e,shop:{id:this.shop_id,user_id:this.to_id,name:this.shop_name,avatar:this.shop_avatar}}),this.$wanlshop.send(e)},addTextMsg:function(n){n.message.content.text=this.replaceEmoji(n.message.content.text),this.msgList.push(n)},addVoiceMsg:function(n){this.msgList.push(n)},addImgMsg:function(n){n.message.content=this.setPicSize(n.message.content),this.msgImgList.push(n.message.content.url),this.msgList.push(n)},addGoodsMsg:function(n){this.msgList.push(n)},addOrderMsg:function(n){this.msgList.push(n)},addSystemTextMsg:function(n){this.msgList.push(n)},emojiData:function(){var n={},t=[],i={};return e.forEach((function(e){var r=e.category.length>0?e.category:"默认";n[r]||(n[r]=[],t.push(r)),n[r].push(e),i[e.phrase]=e.icon})),{groups:n,categories:t,map:i}},replaceEmoji:function(n){var t=this,i=n.replace(/\[([^(\]|\[)]*)\]/g,(function(n,i){return'<img src="'+t.emojiList.map[n]+'" width="18rpx">'}));return i.replace(/(\r\n)|(\n)/g,"<br>")},tabSelect:function(n){this.TabCur=n.currentTarget.dataset.id},loadHistory:function(n){var t=this;if(!this.isHistoryLoading&&!this.reload){this.isHistoryLoading=!0,this.scrollAnimation=!1;var i=this.msgList[0].id;this.$api.post({url:"/wanlshop/chat/history",data:{to_id:this.to_id,page:this.current_page},success:function(n){for(var e=n.data,r=0;r<e.length;r++)"chat"==e[r].type&&"img"==e[r].message.type&&(e[r].message.content=t.setPicSize(e[r].message.content),t.msgImgList.unshift(e[r].message.content.url)),"chat"==e[r].type&&"text"==e[r].message.type&&(e[r].message.content.text=t.replaceEmoji(e[r].message.content.text));e.sort((function(n,t){return n.updatetime-t.updatetime})),t.msgList=1==n.current_page?e:e.concat(t.msgList),t.$nextTick((function(){t.scrollToView="msg"+i,t.$nextTick((function(){t.scrollAnimation=!0}))})),n.current_page==n.last_page?t.reload=!0:t.current_page=n.current_page+1,t.isHistoryLoading=!1},fail:function(n){t.isHistoryLoading=!1}})}},setPicSize:function(n){var t=uni.upx2px(350),i=uni.upx2px(350);if(n.w>t||n.h>i){var e=n.w/n.h;n.w=e>1?t:i*e,n.h=e>1?t/e:i}return n},showMore:function(){this.isVoice=!1,this.hideEmoji=!0,this.hideMore?(this.hideMore=!1,this.openDrawer()):this.hideDrawer()},openDrawer:function(){this.emptybottom=!0,this.popupLayerClass=!0},hideDrawer:function(){var n=this;this.emptybottom=!1,this.popupLayerClass=!1,setTimeout((function(){n.hideMore=!0,n.hideEmoji=!0}),150)},chooseImage:function(){this.getImage("album")},camera:function(){this.getImage("camera")},getImage:function(n){var t=this;this.hideDrawer(),uni.chooseImage({sourceType:[n],sizeType:["original","compressed"],success:function(n){t.$api.get({url:"/wanlshop/common/uploadData",success:function(i){for(var e=0;e<n.tempFilePaths.length;e++)uni.getImageInfo({src:n.tempFilePaths[e],success:function(n){t.$api.upload({url:i.uploadurl,filePath:n.path,name:"file",formData:"local"==i.storage?null:i.multipart,success:function(i){t.sendMsg({url:i.fullurl,w:n.width,h:n.height},"img")}})}})}})}})},showPic:function(n){uni.previewImage({indicator:"none",current:n.content.url,urls:this.msgImgList})},chooseEmoji:function(){this.hideMore=!0,this.hideEmoji?(this.hideEmoji=!1,this.openDrawer()):this.hideDrawer()},addEmoji:function(n){this.textMsg+=n},textareaFocus:function(){this.emptybottom=!0,this.closeTips(),this.popupLayerClass&&0==this.hideMore&&this.hideDrawer()},textareaBlur:function(){this.emptybottom=!1},sendText:function(){if(this.hideDrawer(),this.textMsg){var n={text:this.textMsg};this.sendMsg(n,"text"),this.textMsg=""}},sendGoods:function(n){this.sendMsg(n,"goods"),this.closeTips(),this.hideModal()},sendOrder:function(n){this.sendMsg({id:n.id,order_no:n.order_no,goods:n.goods,state:n.state},"order"),this.closeTips(),this.hideModal()},closeTips:function(){this.isGoods=!1},complaint:function(){this.$wanlshop.to("/pages/user/complaint/complaint?id=".concat(this.shop_id,"&type=2")),this.hideDrawer()},browsing:function(){var n=this;this.hideDrawer(),this.$api.post({url:"/wanlshop/product/getBrowsingToShop",data:{shop_id:this.shop_id},success:function(t){n.goodsData=t,n.modalName="goods"}})},order:function(){var n=this;this.hideDrawer(),this.$api.post({url:"/wanlshop/order/getOrderListToShop",data:{shop_id:this.shop_id},success:function(t){n.orderData=t,n.modalName="order"}})},hideModal:function(){this.modalName=null},playVoice:function(n){var t=this;this.playMsgid=n.id,this.AUDIO.src=n.content.url,this.$nextTick((function(){t.AUDIO.play()}))},voiceBegin:function(n){n.touches.length>1||(this.initPoint.Y=n.touches[0].clientY,this.initPoint.identifier=n.touches[0].identifier,this.RECORDER.start({format:"mp3"}))},recordBegin:function(n){var t=this;this.recording=!0,this.voiceTis="松開 结束",this.recordLength=0,this.recordTimer=setInterval((function(){t.recordLength++}),1e3)},voiceCancel:function(){this.recording=!1,this.voiceTis="按住 说话",this.recordTis="手指上滑 取消發送",this.willStop=!0,this.RECORDER.stop()},voiceIng:function(n){if(this.recording){var t=n.touches[0];this.initPoint.Y-t.clientY>=uni.upx2px(200)?(this.willStop=!0,this.recordTis="松開手指 取消發送"):(this.willStop=!1,this.recordTis="手指上滑 取消發送")}},voiceEnd:function(n){this.recording&&(this.recording=!1,this.voiceTis="按住 说话",this.recordTis="手指上滑 取消發送",this.RECORDER.stop())},recordEnd:function(t){var i=this;clearInterval(this.recordTimer),this.willStop?n.log("取消發送錄音"):this.$api.get({url:"/wanlshop/common/uploadData",success:function(n){i.$api.upload({url:n.uploadurl,filePath:t.tempFilePath,name:"file",formData:"local"==n.storage?null:n.multipart,success:function(n){var t={length:0,url:n.fullurl};t.length=i.recordLength%60,t.length>0&&i.sendMsg(t,"voice")},fail:function(n){i.$wanlshop.msg(JSON.parse(n.data).msg)}})}}),this.willStop=!1},switchVoice:function(){this.hideDrawer(),this.isVoice=!this.isVoice},discard:function(){}}};t.default=r}).call(this,i("5a52")["default"])},e772:function(n,t,i){var e=i("6ce5");"string"===typeof e&&(e=[[n.i,e,""]]),e.locals&&(n.exports=e.locals);var r=i("4f06").default;r("33cb2648",e,!0,{sourceMap:!1,shadowMode:!1})}}]);