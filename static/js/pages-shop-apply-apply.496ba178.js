(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-shop-apply-apply"],{"08ab":function(e,a,t){"use strict";t.r(a);var r=t("8243"),s=t("b873");for(var n in s)"default"!==n&&function(e){t.d(a,e,(function(){return s[e]}))}(n);t("1959");var i,o=t("f0c5"),c=Object(o["a"])(s["default"],r["b"],r["c"],!1,null,"5cfb44b1",null,!1,r["a"],i);a["default"]=c.exports},1959:function(e,a,t){"use strict";var r=t("e724"),s=t.n(r);s.a},"2b51":function(e,a,t){"use strict";var r=t("4ea4");Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,t("96cf");var s=r(t("1da1")),n=r(t("c319")),i={data:function(){return{wanlsys:this.$wanlshop.wanlsys(),state_text:["個人","企业","旗舰店"],name_text:["姓名","企业名称","企业名称"],number_text:["身份證字號","統一信用代碼","統一信用代碼"],image_text:["手持身份證","营业执照","营业执照"],verify_text:["立即入駐","已申請 修改","入駐审核中","已入駐不可操作","未通过审核","已修改成功"],shopdata:{state:0,verify:0,image:"",trademark:"",invitation:""}}},onLoad:function(e){var a=this;if(e)this.$api.get({url:"/wanlshop/shop/apply",success:function(e){e&&(a.shopdata=e)}});else{var t=JSON.parse(e.data);t.id&&(this.shopdata=t)}},methods:{PickerChange:function(e){this.shopdata.state=e.detail.value},formSubmit:function(e){3!=this.shopdata.verify?this.wanlChecker(e):this.$wanlshop.msg("已成功入駐，不可修改再修改申請信息")},wanlChecker:function(e){var a=this;return(0,s.default)(regeneratorRuntime.mark((function t(){var r,s,i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=[{name:"name",checkType:"notnull",errorMsg:"請輸入"+a.name_text[a.shopdata.state]},{name:"number",checkType:"notnull",errorMsg:"請輸入"+a.number_text[a.shopdata.state]},{name:"image",checkType:"notnull",errorMsg:"請上傳"+a.image_text[a.shopdata.state]},{name:"wechat",checkType:"notnull",errorMsg:"請輸入Line"},{name:"mobile",checkType:"phoneno",errorMsg:"請輸入正確的行動電話"}],s=e.detail.value,i=n.default.check(s,r),i?(o=a.shopdata,a.$api.post({url:"/wanlshop/shop/apply",data:o,success:function(e){a.shopdata=e,0==o.verify?(o.verify=2,a.$wanlshop.msg("提交成功，平台將於7個工作日内与您聯系")):(o.verify=5,a.$wanlshop.msg("修改成功！"))}})):a.$wanlshop.msg(n.default.error);case 4:case"end":return t.stop()}}),t)})))()},chooseImg:function(e){var a=this;uni.chooseImage({sourceType:["camera","album"],sizeType:"compressed",count:1,success:function(t){a.$api.get({url:"/wanlshop/common/uploadData",success:function(r){a.$api.upload({url:r.uploadurl,filePath:t.tempFilePaths[0],name:"file",formData:"local"==r.storage?null:r.multipart,success:function(t){a.shopdata[e]=t.fullurl}})}})}})},previewImage:function(e){var a=[],t=this.shopdata;a=2==t.state?[this.$wanlshop.oss(t.image,320,0,1),this.$wanlshop.oss(t.trademark,320,0,1)]:[this.$wanlshop.oss(t.image,320,0,1)],uni.previewImage({urls:a,current:a[e],indicator:"number"})}}};a.default=i},8243:function(e,a,t){"use strict";var r;t.d(a,"b",(function(){return s})),t.d(a,"c",(function(){return n})),t.d(a,"a",(function(){return r}));var s=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("v-uni-view",[t("v-uni-view",{staticClass:"cu-custom",style:{height:e.wanlsys.height+"px"}},[t("v-uni-view",{staticClass:"cu-bar bg-bgcolor fixed",style:{height:e.wanlsys.height+"px",paddingTop:e.wanlsys.top+"px"}},[t("v-uni-view",{staticClass:"action",on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.$wanlshop.back(1)}}},[t("v-uni-text",{staticClass:"wlIcon-fanhui1"})],1),t("v-uni-view",{staticClass:"content",style:{top:e.wanlsys.top+"px"}},[e._v("申請入駐")]),t("v-uni-view",{staticClass:"action",on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.$wanlshop.to("/pages/user/service")}}},[t("v-uni-text",{staticClass:"wlIcon-kefu"})],1)],1)],1),t("v-uni-form",{on:{submit:function(a){arguments[0]=a=e.$handleEvent(a),e.formSubmit.apply(void 0,arguments)}}},[t("v-uni-view",{staticClass:"cu-form-group"},[t("v-uni-view",{staticClass:"title"},[e._v(e._s(e.name_text[e.shopdata.state]))]),t("v-uni-input",{attrs:{name:"name",placeholder:"請輸入"+e.name_text[e.shopdata.state]},model:{value:e.shopdata.name,callback:function(a){e.$set(e.shopdata,"name",a)},expression:"shopdata.name"}})],1),t("v-uni-view",{staticClass:"cu-form-group"},[t("v-uni-view",{staticClass:"title"},[e._v(e._s(e.number_text[e.shopdata.state]))]),t("v-uni-input",{attrs:{name:"number",placeholder:"請輸入"+e.number_text[e.shopdata.state]},model:{value:e.shopdata.number,callback:function(a){e.$set(e.shopdata,"number",a)},expression:"shopdata.number"}})],1),t("v-uni-view",{staticClass:"cu-form-group margin-top-bj",class:2==e.shopdata.state?"":"margin-bottom-bj"},[t("v-uni-view",{staticClass:"title"},[e._v(e._s(e.image_text[e.shopdata.state]))]),t("v-uni-input",{attrs:{name:"image",placeholder:"点击上傳"+e.image_text[e.shopdata.state],disabled:!0},on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.chooseImg("image")}},model:{value:e.shopdata.image,callback:function(a){e.$set(e.shopdata,"image",a)},expression:"shopdata.image"}}),e.shopdata.image?t("v-uni-view",{staticClass:"cu-avatar radius",on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.previewImage(0)}}},[t("v-uni-image",{attrs:{src:e.$wanlshop.oss(e.shopdata.image,32,0,1),mode:"widthFix"}})],1):e._e()],1),2==e.shopdata.state?t("v-uni-view",{staticClass:"cu-form-group margin-bottom-bj"},[t("v-uni-view",{staticClass:"title"},[e._v("商标證书")]),t("v-uni-input",{attrs:{name:"trademark",placeholder:"点击上傳商标證书",disabled:!0},on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.chooseImg("trademark")}},model:{value:e.shopdata.trademark,callback:function(a){e.$set(e.shopdata,"trademark",a)},expression:"shopdata.trademark"}}),e.shopdata.trademark?t("v-uni-view",{staticClass:"cu-avatar radius",on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.previewImage(1)}}},[t("v-uni-image",{attrs:{src:e.$wanlshop.oss(e.shopdata.trademark,32,0,1),mode:"widthFix"}})],1):e._e()],1):e._e(),t("v-uni-view",{staticClass:"cu-form-group"},[t("v-uni-view",{staticClass:"title"},[e._v("line ID")]),t("v-uni-input",{attrs:{name:"wechat",placeholder:"請輸入Line"},model:{value:e.shopdata.wechat,callback:function(a){e.$set(e.shopdata,"wechat",a)},expression:"shopdata.wechat"}}),t("v-uni-text",{staticClass:"wlIcon-WeChat text-green"})],1),t("v-uni-view",{staticClass:"cu-form-group"},[t("v-uni-view",{staticClass:"title"},[e._v("行動電話")]),t("v-uni-input",{attrs:{name:"mobile",maxlength:"11",type:"number",placeholder:"請輸入行動電話"},model:{value:e.shopdata.mobile,callback:function(a){e.$set(e.shopdata,"mobile",a)},expression:"shopdata.mobile"}})],1),t("v-uni-view",{staticClass:"cu-form-group"},[t("v-uni-view",{staticClass:"title"},[e._v("邀請碼")]),t("v-uni-input",{attrs:{name:"invitation",maxlength:"11",type:"number",placeholder:"請輸入邀请碼"},model:{value:e.shopdata.invitation,callback:function(a){e.$set(e.shopdata,"invitation",a)},expression:"shopdata.invitation"}})],1),t("v-uni-view",{staticClass:"edgeInsetBottom"}),t("v-uni-view",{staticClass:"wanlian cu-bar tabbar foot flex flex-direction"},[t("v-uni-button",{staticClass:"cu-btn wanl-bg-orange lg",attrs:{"form-type":"submit",disabled:3==e.shopdata.verify}},[e._v(e._s(e.verify_text[e.shopdata.verify]))])],1)],1)],1)},n=[]},b5b5:function(e,a,t){var r=t("24fb");a=r(!1),a.push([e.i,".cu-btn[disabled][data-v-5cfb44b1]{opacity:1;color:#fff;background:rgba(254,102,0,.35)}.wanlian.cu-bar.tabbar[data-v-5cfb44b1]{background-color:transparent}.wanlian.cu-bar.tabbar .cu-btn[data-v-5cfb44b1]{width:calc(100% - %?50?%)}.wanlian.cu-bar.tabbar .cu-btn.lg[data-v-5cfb44b1]{font-size:%?32?%;height:%?86?%}.cu-form-group .title[data-v-5cfb44b1], .cu-form-group uni-input[data-v-5cfb44b1]{font-size:%?28?%}.cu-avatar uni-image[data-v-5cfb44b1]{width:%?64?%;height:%?64?%}",""]),e.exports=a},b873:function(e,a,t){"use strict";t.r(a);var r=t("2b51"),s=t.n(r);for(var n in r)"default"!==n&&function(e){t.d(a,e,(function(){return r[e]}))}(n);a["default"]=s.a},c319:function(e,a,t){t("c975"),t("a9e3"),t("4d63"),t("ac1f"),t("25f0"),t("1276"),e.exports={error:"",check:function(e,a){for(var t=0;t<a.length;t++){if(!a[t].checkType)return!0;if(!a[t].name)return!0;if(!a[t].errorMsg)return!0;if(!e[a[t].name])return this.error=a[t].errorMsg,!1;switch(a[t].checkType){case"string":var r=new RegExp("^.{"+a[t].checkRule+"}$");if(!r.test(e[a[t].name]))return this.error=a[t].errorMsg,!1;break;case"int":r=new RegExp("^(-[1-9]|[1-9])[0-9]{"+a[t].checkRule+"}$");if(!r.test(e[a[t].name]))return this.error=a[t].errorMsg,!1;break;case"between":if(!this.isNumber(e[a[t].name]))return this.error=a[t].errorMsg,!1;var s=a[t].checkRule.split(",");if(s[0]=Number(s[0]),s[1]=Number(s[1]),e[a[t].name]>s[1]||e[a[t].name]<s[0])return this.error=a[t].errorMsg,!1;break;case"betweenD":r=/^-?[1-9][0-9]?$/;if(!r.test(e[a[t].name]))return this.error=a[t].errorMsg,!1;s=a[t].checkRule.split(",");if(s[0]=Number(s[0]),s[1]=Number(s[1]),e[a[t].name]>s[1]||e[a[t].name]<s[0])return this.error=a[t].errorMsg,!1;break;case"betweenF":r=/^-?[0-9][0-9]?.+[0-9]+$/;if(!r.test(e[a[t].name]))return this.error=a[t].errorMsg,!1;s=a[t].checkRule.split(",");if(s[0]=Number(s[0]),s[1]=Number(s[1]),e[a[t].name]>s[1]||e[a[t].name]<s[0])return this.error=a[t].errorMsg,!1;break;case"same":if(e[a[t].name]!=a[t].checkRule)return this.error=a[t].errorMsg,!1;break;case"notsame":if(e[a[t].name]==a[t].checkRule)return this.error=a[t].errorMsg,!1;break;case"email":r=/^\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/;if(!r.test(e[a[t].name]))return this.error=a[t].errorMsg,!1;break;case"phoneno":r=/^09[0-9]{8,8}$/;if(!r.test(e[a[t].name]))return this.error=a[t].errorMsg,!1;break;case"zipcode":r=/^[0-9]{6}$/;if(!r.test(e[a[t].name]))return this.error=a[t].errorMsg,!1;break;case"reg":r=new RegExp(a[t].checkRule);if(!r.test(e[a[t].name]))return this.error=a[t].errorMsg,!1;break;case"in":if(-1==a[t].checkRule.indexOf(e[a[t].name]))return this.error=a[t].errorMsg,!1;break;case"notnull":if(null==e[a[t].name]||e[a[t].name].length<1)return this.error=a[t].errorMsg,!1;break}}return!0},isNumber:function(e){var a=/^-?[1-9][0-9]?.?[0-9]*$/;return a.test(e)}}},e724:function(e,a,t){var r=t("b5b5");"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var s=t("4f06").default;s("a865f52c",r,!0,{sourceMap:!1,shadowMode:!1})}}]);